<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="bootstrap-3.1.1-dist/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap-3.1.1-dist/css/bootstrap-theme.min.css">
<style>
    body { padding-top: 70px;}
    h3 { height:2em; overflow: hidden; text-overflow: ellipsis;}
    h3 + p { height: 3em; overflow: hidden; text-overflow: ellipsis;}
    .thumbnail>img { height:90px !important;}
</style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="circlename.html">例大祭11サークル</a>
    </div>
    <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class=""><a href="circlename.html">名前順</a></li>
        <li class=""><a href="block123.html">東１２３</a></li>
        <li class=""><a href="block456.html">東４５６</a></li>
        <li class="dropdown hidden-lg hidden-md hidden-sm">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
          <ul class="dropdown-menu" role="keymap">
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
<div class="container">
<ul class="nav nav-tabs nav-justified visible-sm visible-md visible-lg" role="keymap">
</ul>
<div id="main" class="container">
</div>
</div>
<script src="jquery/jquery-2.1.0.min.js"></script>
<script src="bootstrap-3.1.1-dist/js/bootstrap.min.js"></script>
<script src="js/tmpl.min.js"></script>
<script src="data/circlename.json"></script>
<script src="data/circlemap.json"></script>
<script type="text/x-tmpl" id="tmpl-keymap">
{% for (var i=0; i<o.keymap.length; i++) { %}
<li class=""><a href="#" data-key="{%=o.keymap[i]%}">{%=o.keymap[i]%}</a></li>
{% } %}
</script>
<script type="text/x-tmpl" id="tmpl-container">
<div class="page-header">
    <h3>{%=o.key%}</h3>
</div>
<div class="row">
</div>
</script>
<script type="text/x-tmpl" id="tmpl-circle">
  <div class="col-sm-6 col-md-3">
    <div class="thumbnail">
      {% if (o.avatar) { %}
      <img class="img-rounded" src="{%=o.avatar%}" alt="{%=o.name%}">
      {% } else { %}
      <img class="img-rounded" src="images/placeholder.gif" alt="{%=o.name%}">
      {% } %}
      <div class="caption">
        <h3>{%=o.name%}</h3>
        <p>{%=o.position1%}-{%=o.position2%}-{%=o.position3%} / {%=o.penName%}</p>
        <p>
            {% if (o.web) { %}
                <a href="{%=o.web%}" target="_blank" class="btn btn-primary" role="button">查看官网</a> 
            {% } else { %}
                <a href="#" target="_blank" class="btn btn-default disabled" role="button">没有官网</a> 
            {% } %}
            {% if (o.pixiv) { %}
                <a href="http://www.pixiv.net/member.php?id={%=o.pixiv%}" target="_blank" class="btn btn-info" role="button">P站</a> 
            {% } %}
        </p>
      </div>
    </div>
  </div>
</script>
<script type="text/javascript">
$(function(){
	$('[role="keymap"]').each(function(){
		$(this).append(tmpl('tmpl-keymap', data));
	});
	$('[role="keymap"]').on('click', 'a', function(){
		var key = $(this).data('key');
        var circlelist = data[key];
		var $container = $('#main').empty();
		$container.append(tmpl('tmpl-container', {key:key}));
		var $row = $container.find('.row');
		for (var i=0; i<circlelist.length; i++) {
			var circle = circlelist[i];
			var meta = map[circle.name]
			$row.append(tmpl('tmpl-circle', $.extend(circle,meta)));
		}
	});
});
</script>
</body>
</html>